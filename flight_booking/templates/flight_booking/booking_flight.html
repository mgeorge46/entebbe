{% extends "includes/base_dash.html" %}
{% block greetings %}Plan, Estimate,Quote, Book, Fly{% endblock greetings %}
{% block text %}Entebbe Airways{% endblock text %}
{% block breadlink1 %}{% endblock breadlink1 %}{% block breadtext1 %}Home{% endblock breadtext1 %}
{% block breadlink2 %}{% endblock breadlink2 %}{% block breadtext2 %}Booking{% endblock breadtext2 %}
{% block breadlink3 %}{% endblock breadlink3 %}{% block breadtext3 %}Planning{% endblock breadtext3 %}
{% block breadlink4 %}{% endblock breadlink4 %}{% block breadtext4 %}{% endblock breadtext4 %}
{% block content %}
<style>
    .hidden {
        display: none;
    }
</style>
<div class="col-lg-12 col-sm-12 card stat-widget-one card-body">
    <div class="basic-form">
        <form id="flightForm" name="FlightBookingForm" method="POST" >
            {% csrf_token %}

            <div id="inputFieldsContainer">
                <div class="inputFields">
                    <div class="form-row">
                        <div class="form-group col-md-2.5">
                            <select class="form-control disabling-options" name="from" placeholder="From" >
                                <option value="" selected disabled> Select Origin Airport </option>
                                {% for airport in airports %}
                                <option value="{{airport.iata}}">
                                    {{airport.name }}-{{airport.iata }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-2.5">
                            <select class="form-control disabling-options" name="to" placeholder="To">
                                <option value="" selected disabled> Select Destination Airport</option>
                                {% for airport in airports %}
                                <option value="{{airport.iata}}">
                                    {{ airport.name }}-{{ airport.iata }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-1">
                            <input type="number" class="form-control" name="numberOfPeople"
                                   placeholder="PAX">
                        </div>
                        <div class="form-group col-md-2.5">
                            <select class="form-control" name="aircraft">
                                {% for aircraft in aircrafts %}
                                <option value="BBJ / Boeing 737-700">
                                    {{aircraft.abbreviation }}-{{ aircraft.abbreviation }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-2.5">
                            <input type="datetime-local" class="form-control" name="departure_time" placeholder="Date">
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <input type="radio" name="tripType" value="oneWay" checked> One Way
                <input type="radio" name="tripType" value="roundTrip"> Round Trip
                <input type="radio" name="tripType" value="multiCity" id="multiCity"> Multi City
            </div>
            <br/>

            <button type="button" id="addRowBtn" class="hidden btn btn-primary">Add a Flight</button>
            <br/>
            <br/><br/>
            <button type="submit" class="btn btn-success"> Calculate/Qoute Flight(s)</button>
            <button type="reset" class="btn btn-warning">Cancel</button>

        </form>
    </div>
</div>


<script>
    document.querySelectorAll('input[name="tripType"]').forEach(function (radio) {
        radio.addEventListener('change', function () {
            document.getElementById('addRowBtn').classList.toggle('hidden', this.value !== 'multiCity');
        });
    });

    document.getElementById('addRowBtn').addEventListener('click', function () {
        var inputFieldsContainer = document.getElementById('inputFieldsContainer');
        var newRow = document.createElement('div');
        newRow.className = 'inputFields';
        newRow.innerHTML = `

                    <div class="form-row">
                        <div class="form-group col-md-2.5">
                            <select class="form-control disabling-options" name="from" placeholder="From">
                                <option value="" selected disabled> Select Origin Airport </option>
                                {% for airport in airports %}
                                <option value="{{ aircraft.abbreviation }}-{{ aircraft.abbreviation }}">
                                    {{airport.name }}-{{airport.aita }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-2.5">
                            <select class="form-control disabling-options" name="from" placeholder="To">
                                <option value="" selected disabled> Select Destination Airport</option>
                                {% for airport in airports %}
                                <option value="{{ airport.abbreviation }}-{{ airport.abbreviation }}">
                                    {{ airport.name }}-{{ airport.iata }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-1">
                            <input type="number" class="form-control" name="numberOfPeople"
                                   placeholder="PAX">
                        </div>
                        <div class="form-group col-md-2.5">
                            <select class="form-control" name="aircraft">
                                {% for aircraft in aircrafts %}
                                <option value="{{ aircraft.abbreviation }}-{{ aircraft.abbreviation }}">
                                    {{aircraft.abbreviation }}-{{ aircraft.abbreviation }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-2.5">
                            <input type="datetime-local" class="form-control" name="date" placeholder="Date">
                        </div>


                        <div class="form-group col-md-2">
                        <button type="button" class="removeRowBtn fa fa-trash btn btn-danger"></button>
                        </div>
                    </div>

        `;
        inputFieldsContainer.appendChild(newRow);

        newRow.querySelector('.removeRowBtn').addEventListener('click', function () {
            newRow.remove();
        });
    });
</script>

<div class="col-lg-12 col-sm-12 card stat-widget-one card-body"><h3>Recent Searches</h3></div>

{% endblock content %}
